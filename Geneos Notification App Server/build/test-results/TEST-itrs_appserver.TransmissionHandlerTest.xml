<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="itrs_appserver.TransmissionHandlerTest" tests="6" skipped="0" failures="0" errors="0" timestamp="2016-02-04T10:09:21" hostname="ITRSLP043" time="1.156">
  <properties/>
  <testcase name="testPostCreation" classname="itrs_appserver.TransmissionHandlerTest" time="0.684"/>
  <testcase name="testTransmissionFail" classname="itrs_appserver.TransmissionHandlerTest" time="0.145"/>
  <testcase name="testTransmissionCorrect" classname="itrs_appserver.TransmissionHandlerTest" time="0.118"/>
  <testcase name="postCreationFailTest" classname="itrs_appserver.TransmissionHandlerTest" time="0.0"/>
  <testcase name="sendPostURLFailureTest" classname="itrs_appserver.TransmissionHandlerTest" time="0.067"/>
  <testcase name="sendPostTest" classname="itrs_appserver.TransmissionHandlerTest" time="0.141"/>
  <system-out><![CDATA[10:09:21.891 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-23] INFO  c.itrsgroup.actor.MessageDispatcher - Successfully connected to remote service [akka.tcp://ClusterSystem@192.168.220.54:2551/user/frontEnd]
10:09:21.892 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-23] INFO  c.itrsgroup.actor.MessageDispatcher - Forwarding Subscription op to cluster frontend: Subscribe(ModelSub(testa2/rows/row[wild(@name,"*")]/cell,Set(),LIST,),None)
10:09:22.032 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-16] INFO  c.itrsgroup.actor.MessageDispatcher - Successfully connected to remote service [akka.tcp://ClusterSystem@192.168.220.54:2551/user/frontEnd]
10:09:22.032 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-16] INFO  c.itrsgroup.actor.MessageDispatcher - Forwarding Subscription op to cluster frontend: Subscribe(ModelSub(/geneos/gateway[(@name="GW_TEST_50144")]/directory/probe[(@name="SYSMON")]/managedEntity[(@name="HELLO")]/sampler[(@name="Cluster Monitoring Sampler")][(@type="")]/dataview[(@name="192-168-220-54-2551-clients")]/rows/row[wild(@name,"*")]/cell,Set(),LIST,),None)
10:09:22.359 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-8] INFO  c.itrsgroup.actor.MessageDispatcher - Successfully connected to remote service [akka.tcp://ClusterSystem@192.168.220.54:2551/user/frontEnd]
10:09:22.360 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-8] INFO  c.itrsgroup.actor.MessageDispatcher - Forwarding Subscription op to cluster frontend: Subscribe(ModelSub(/geneos/gateway[(@name="GW_TEST_50144")]/directory/probe[(@name="SYSMON")]/managedEntity[(@name="FKM")]/sampler[(@name="FKM")][(@type="")]/dataview[(@name="FKM")]/rows/row[wild(@name,"*")]/cell,Set(),LIST,),None)
{"fail":{"severity":"something","xpath":"Something","time":"2016-02-04T10:09:22.510","message":"something","wrong":"Something"}}
10:09:22.585 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-8] INFO  c.itrsgroup.actor.MessageDispatcher - Successfully connected to remote service [akka.tcp://ClusterSystem@192.168.220.54:2551/user/frontEnd]
10:09:22.586 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-8] INFO  c.itrsgroup.actor.MessageDispatcher - Forwarding Subscription op to cluster frontend: Subscribe(ModelSub(/geneos/gateway[(@name="GW_TEST_50144")]/directory/probe[(@name="SYSMON")]/managedEntity[(@name="CPU_Entity")]/sampler[(@name="CPU_sampler")][(@type="")]/dataview[(@name="CPU_sampler")]/rows/row[wild(@name,"*")]/cell,Set(),LIST,),None)
{"fail":{"severity":"something","xpath":"Something","time":"2016-02-04T10:09:22.510","message":"something","wrong":"Something"}}
{"data":{"severity":"something","xpath":"Something","time":"2016-02-04T10:09:22.638","message":"something","value":"Something"},"to":"fCPKIL7K5H0:APA91bER9gg86wQYCx1audS_IWFyR5fxB96E7JhKCDavAWy0nimqTri2tLWuxsbbdMHCwzuGsGjhVfra82zl_ASnpNEQF5PKr09KC9GMHmndFj2S6uA_VYOs84q5AQPa-seZJG7PkwYY"}
10:09:22.785 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-9] INFO  c.itrsgroup.actor.MessageDispatcher - Successfully connected to remote service [akka.tcp://ClusterSystem@192.168.220.54:2551/user/frontEnd]
10:09:22.785 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-9] INFO  c.itrsgroup.actor.MessageDispatcher - Forwarding Subscription op to cluster frontend: Subscribe(ModelSub(/geneos/gateway[(@name="GW_TEST_50144")]/directory/probe[(@name="SYSMON")]/managedEntity[(@name="TOOLKIT_TEST")]/sampler[(@name="Toolkit")][(@type="")]/dataview[(@name="Toolkit")]/rows/row[wild(@name,"*")]/cell,Set(),LIST,),None)
This is the thread xpath : testa10
{"data":{"severity":"bad","xpath":"testa10","message":"New Alert :bad","value":"0"},"registration_ids":["testa10"]}
10:09:22.839 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-2] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
10:09:22.843 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-4] INFO  Remoting - Starting remoting
10:09:22.863 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-7] INFO  Remoting - Remoting started; listening on addresses :[akka.tcp://OpenAccessApiClient-UnknownDevBuild@192.168.10.207:21722]
[testa10]
10:09:22.864 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-3] INFO  c.itrsgroup.actor.MessageDispatcher - Attempting to connect to remote service at [192.168.220.54:2551] 1 time(s)
This is the thread xpath : testa9
{"data":{"severity":"bad","xpath":"testa9","message":"New Alert :bad","value":"0"},"registration_ids":["testa9"]}
10:09:22.897 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-7] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
10:09:22.900 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-6] INFO  Remoting - Starting remoting
10:09:22.911 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-5] INFO  Remoting - Remoting started; listening on addresses :[akka.tcp://OpenAccessApiClient-UnknownDevBuild@192.168.10.207:21739]
[testa9]
10:09:22.913 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-5] INFO  c.itrsgroup.actor.MessageDispatcher - Attempting to connect to remote service at [192.168.220.54:2551] 1 time(s)
10:09:22.933 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-20] INFO  akka.contrib.pattern.ClusterClient - Connected to [akka.tcp://ClusterSystem@192.168.220.54:2551/user/receptionist]
10:09:22.951 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-20] INFO  c.itrsgroup.actor.MessageDispatcher - Authenticating with remote service [/user/frontEnd] at [192.168.220.54:2551]
10:09:22.974 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-6] INFO  akka.contrib.pattern.ClusterClient - Connected to [akka.tcp://ClusterSystem@192.168.220.54:2551/user/receptionist]
10:09:22.975 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-16] INFO  c.itrsgroup.actor.MessageDispatcher - Successfully connected to remote service [akka.tcp://ClusterSystem@192.168.220.54:2551/user/frontEnd]
10:09:22.975 [OpenAccessApiClient-UnknownDevBuild-akka.actor.default-dispatcher-16] INFO  c.itrsgroup.actor.MessageDispatcher - Forwarding Subscription op to cluster frontend: Subscribe(ModelSub(/geneos/gateway[(@name="GW_TEST_50144")]/directory/probe[(@name="SYSMON")]/managedEntity[(@name="Copy of New Managed entity")]/sampler[(@name="CPU_sampler")][(@type="")]/dataview[(@name="CPU_sampler")]/rows/row[wild(@name,"*")]/cell,Set(),LIST,),None)
]]></system-out>
  <system-err><![CDATA[Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
SEVERE: [Transmission]IO error has been encountered, tranmission failed! : Server returned HTTP response code: 400 for URL: https://android.googleapis.com/gcm/send
java.io.IOException: Server returned HTTP response code: 400 for URL: https://android.googleapis.com/gcm/send
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1839)
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1440)
	at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
	at geneos_notification.controllers.TransmissionHandler.transmitPost(TransmissionHandler.java:64)
	at itrs_appserver.TransmissionHandlerTest.testTransmissionFail(TransmissionHandlerTest.java:80)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:19)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:64)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:50)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:106)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:360)
	at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Thread Execution successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
WARNING: [T-WARNING]OpenAccess null response due to multiple reloads, this is handled and expected.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [Transmission]POST Returned data : {"multicast_id":6643296262583224716,"success":0,"failure":1,"canonical_ids":0,"results":[{"error":"NotRegistered"}]}
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [Transmission]Transmission Successful
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: Login attempt with username : testa10@Default
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [SQL]Checking user : testa10@Default & testa10
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [SQL]Device testa10 logged in successfully
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: Initial log on for testa10@Default with device testa10
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [Transmission]Output JSON data : {"data":{"severity":"bad","xpath":"testa10","message":"New Alert :bad","value":"0"},"registration_ids":["testa10"]}
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
SEVERE: [Transmission]An error was encountered with system connection parameters. Please ensure a stable and configured network configuration and try again.
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Initialization of thread for xpath : testa10
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: Login attempt with username : testa9@Default
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [SQL]Checking user : testa9@Default & testa9
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: Thread xpath exection for path : testa10
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [SQL]Device testa9 logged in successfully
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: Initial log on for testa9@Default with device testa9
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [Transmission]Output JSON data : {"data":{"severity":"bad","xpath":"testa9","message":"New Alert :bad","value":"0"},"registration_ids":["testa9"]}
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [T-INFO]Initialization of thread for xpath : testa9
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: Thread xpath exection for path : testa9
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [Transmission]POST Returned data : {"multicast_id":6096464589350395404,"success":0,"failure":1,"canonical_ids":0,"results":[{"error":"InvalidRegistration"}]}
Feb 04, 2016 10:09:22 AM geneos_notification.loggers.LogObject doLog
INFO: [Transmission]Transmission Successful
]]></system-err>
</testsuite>
